<!DOCTYPE html>
<html>
<head>
    <title>Force Browser Refresh Test</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
</head>
<body>
    <h1>Testing CORS API Calls</h1>
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        async function testAPI(url, name) {
            try {
                const response = await fetch(url);
                const data = await response.json();
                results.innerHTML += `<p style="color: green;">✅ ${name}: OK (${response.status})</p>`;
            } catch (error) {
                results.innerHTML += `<p style="color: red;">❌ ${name}: FAILED - ${error.message}</p>`;
            }
        }
        
        // Test all APIs that were failing
        const tests = [
            ['http://localhost:8000/api/capital', 'Capital API'],
            ['http://localhost:8000/api/dashboard/positions', 'Positions API'],
            ['http://localhost:8000/api/dashboard/risk-metrics', 'Risk Metrics API'],
            ['http://localhost:8000/api/market/overview', 'Market Overview API'],
            ['http://localhost:8000/paper_trading_status.json', 'Paper Trading Status'],
            ['http://localhost:8000/api/health', 'Health API']
        ];
        
        tests.forEach(([url, name]) => testAPI(url, name));
    </script>
</body>
</html>
